 @model List<ECommerceProject.Models.Product>
@if (User.Identity?.IsAuthenticated == true)
{
    <section class="py-3" style="background-image: url('images/background-pattern.jpg');background-repeat: no-repeat;background-size: cover;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">

                    <div class="banner-blocks">

                        <div class="banner-ad large bg-info block-1">

                            <div class="swiper main-swiper">
                                <div class="swiper-wrapper">

                                    <div class="swiper-slide">
                                        <div class="row banner-content p-5">
                                            <div class="content-wrapper col-md-7">
                                                <div class="categories my-3">100% natural</div>
                                                <h3 class="display-4">Fresh Smoothie & Summer Juice</h3>
                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Dignissim massa diam elementum.</p>
                                                <a href="#" class="btn btn-outline-dark btn-lg text-uppercase fs-6 rounded-1 px-4 py-3 mt-3">Shop Now</a>
                                            </div>
                                            <div class="img-wrapper col-md-5">
                                                <img src="~/images/product-thumb-1.png" class="img-fluid">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="swiper-slide">
                                        <div class="row banner-content p-5">
                                            <div class="content-wrapper col-md-7">
                                                <div class="categories mb-3 pb-3">100% natural</div>
                                                <h3 class="banner-title">Fresh Smoothie & Summer Juice</h3>
                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Dignissim massa diam elementum.</p>
                                                <a href="#" class="btn btn-outline-dark btn-lg text-uppercase fs-6 rounded-1">Shop Collection</a>
                                            </div>
                                            <div class="img-wrapper col-md-5">
                                                <img src="~/images/product-thumb-1.png" class="img-fluid">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="swiper-slide">
                                        <div class="row banner-content p-5">
                                            <div class="content-wrapper col-md-7">
                                                <div class="categories mb-3 pb-3">100% natural</div>
                                                <h3 class="banner-title">Heinz Tomato Ketchup</h3>
                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Dignissim massa diam elementum.</p>
                                                <a href="#" class="btn btn-outline-dark btn-lg text-uppercase fs-6 rounded-1">Shop Collection</a>
                                            </div>
                                            <div class="img-wrapper col-md-5">
                                                <img src="~/images/product-thumb-2.png" class="img-fluid">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="swiper-pagination"></div>

                            </div>
                        </div>

                        <div class="banner-ad bg-success-subtle block-2" style="background:url('images/ad-image-1.png') no-repeat;background-position: right bottom">
                            <div class="row banner-content p-5">

                                <div class="content-wrapper col-md-7">
                                    <div class="categories sale mb-3 pb-3">20% off</div>
                                    <h3 class="banner-title">Fruits & Vegetables</h3>
                                    <a href="#" class="d-flex align-items-center nav-link">Shop Collection <svg width="24" height="24"><use xlink:href="#arrow-right"></use></svg></a>
                                </div>

                            </div>
                        </div>

                        <div class="banner-ad bg-danger block-3" style="background:url('images/ad-image-2.png') no-repeat;background-position: right bottom">
                            <div class="row banner-content p-5">

                                <div class="content-wrapper col-md-7">
                                    <div class="categories sale mb-3 pb-3">15% off</div>
                                    <h3 class="item-title">Baked Products</h3>
                                    <a href="#" class="d-flex align-items-center nav-link">Shop Collection <svg width="24" height="24"><use xlink:href="#arrow-right"></use></svg></a>
                                </div>

                            </div>
                        </div>

                    </div>
                    <!-- / Banner Blocks -->

                </div>
            </div>
        </div>
    </section>

    <section class="py-5 overflow-hidden">
        <div class="container-fluid">

            <div class="row">
                <div class="col-md-12">

                    <div class="category-carousel swiper">
                        <div class="swiper-wrapper">
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-bread-baguette.png" alt="Category Thumbnail">
                                <h3 class="category-title">Breads & Sweets</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-soft-drinks-bottle.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-wine-glass-bottle.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-animal-products-drumsticks.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-bread-herb-flour.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>
                            <a href="index.html" class="nav-link category-item swiper-slide">
                                <img src="~/images/icon-vegetables-broccoli.png" alt="Category Thumbnail">
                                <h3 class="category-title">Fruits & Veges</h3>
                            </a>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>


    <section class="py-5 overflow-hidden">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">

                    <div class="section-header d-flex flex-wrap flex-wrap justify-content-between mb-5">

                        <h2 class="section-title">Newly Arrived Brands</h2>

                        <div class="d-flex align-items-center">
                            <a href="#" class="btn-link text-decoration-none">View All Categories →</a>
                            <div class="swiper-buttons">
                                <button class="swiper-prev brand-carousel-prev btn btn-yellow">❮</button>
                                <button class="swiper-next brand-carousel-next btn btn-yellow">❯</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-md-12">

                    <div class="brand-carousel swiper">
                        <div class="swiper-wrapper">

                            <div class="swiper-slide">
                                <div class="card mb-3 p-3 rounded-4 shadow border-0">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="~/images/product-thumb-11.jpg" class="img-fluid rounded" alt="Card title">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body py-0">
                                                <p class="text-muted mb-0">Amber Jar</p>
                                                <h5 class="card-title">Honey best nectar you wish to get</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="card mb-3 p-3 rounded-4 shadow border-0">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="~/images/product-thumb-12.jpg" class="img-fluid rounded" alt="Card title">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body py-0">
                                                <p class="text-muted mb-0">Amber Jar</p>
                                                <h5 class="card-title">Honey best nectar you wish to get</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="card mb-3 p-3 rounded-4 shadow border-0">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="~/images/product-thumb-13.jpg" class="img-fluid rounded" alt="Card title">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body py-0">
                                                <p class="text-muted mb-0">Amber Jar</p>
                                                <h5 class="card-title">Honey best nectar you wish to get</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="card mb-3 p-3 rounded-4 shadow border-0">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="~/images/product-thumb-14.jpg" class="img-fluid rounded" alt="Card title">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body py-0">
                                                <p class="text-muted mb-0">Amber Jar</p>
                                                <h5 class="card-title">Honey best nectar you wish to get</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="card mb-3 p-3 rounded-4 shadow border-0">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="~/images/product-thumb-11.jpg" class="img-fluid rounded" alt="Card title">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body py-0">
                                                <p class="text-muted mb-0">Amber Jar</p>
                                                <h5 class="card-title">Honey best nectar you wish to get</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="card mb-3 p-3 rounded-4 shadow border-0">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="~/images/product-thumb-12.jpg" class="img-fluid rounded" alt="Card title">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body py-0">
                                                <p class="text-muted mb-0">Amber Jar</p>
                                                <h5 class="card-title">Honey best nectar you wish to get</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>






    <!--best saling -->

    <section class="py-5" style="min-height: 100vh;">
     

        <div class="container-fluid">
            <h2 class="section-title">Best Saling</h2>
            <!-- Dropdown for category filter -->
            <div class="select-group text-center mb-4">
                <select class="btn btn-primary mt-2" id="categoryFilter">
                    <option value="*">All</option>
                    @foreach (var category in Enum.GetValues(typeof(ECommerceProject.Models.Department)))
                    {
                        <option value=".@(category.ToString().ToLower())">@category</option>
                    }
                </select>
            </div>

            <!-- Gallery Section -->
            <div class="gallery my-4 d-flex flex-wrap justify-content-center align-items-start">
                @if (Model != null && Model.Any())
                {
                    foreach (var product in Model)
                    {
                        decimal discountPercentage = 0.10M; // 10% discount
                        decimal discountedPrice = product.Price > 10 ? product.Price * (1 - discountPercentage) : product.Price;

                        // Only show product if it has a discount
                        if (product.Price > 10)
                        {
                            <div class="product-item @(product.Category?.Name.ToLower() ?? "default-category")" style="margin: 10px;">
                                <div class="d-flex flex-column align-items-center">
                                    @if (User.Identity.IsAuthenticated && !User.IsInRole("Admin"))
                                    {
                                        <a asp-action="Details" asp-controller="Product" asp-route-id="@product.Id" class="btn-wishlist">
                                            <svg width="24" height="24"><use xlink:href="#heart"></use></svg>
                                        </a>
                                    }
                                    <div>
                                        @if (!string.IsNullOrEmpty(product.ImageUrl))
                                        {
                                            <img src="@product.ImageUrl" alt="Product Image" width="200" height="200" />
                                        }
                                        else
                                        {
                                            <p>No image available</p>
                                        }
                                    </div>
                                    <h3 class="product-title text-center">@product.Name</h3>
                                    @if (User.Identity.IsAuthenticated && !User.IsInRole("Admin"))
                                    {
                                        <span class="qty">1 Unit</span>

                                        <span class="rating">
                                            <svg width="24" height="24" class="text-primary"><use xlink:href="#star-solid"></use></svg> 4.5
                                        </span>
                                    }
                                    <span class="price">
                                        @if (User.Identity.IsAuthenticated && !User.IsInRole("Admin"))
                                        {
                                            @if (product.Price > 10)
                                            {
                                                <span class="text-danger text-decoration-line-through" style="font-size: 0.8em;">@product.Price.ToString("C")</span>
                                                <span class="text-success" style="font-size: 0.8em;">@discountedPrice.ToString("C")</span>
                                                <!-- Discount Badge -->
                                                <span class="badge bg-success position-absolute m-3" style="font-size: 0.4em;">-10% Off</span>
                                            }
                                        }
                                    </span>
  
                                </div>
                            </div>
                        }
                    }
                }
                else
                {
                    <p class="text-center">No products available.</p>
                }
            </div>


        </div>
    </section>








    <!--Trinding of products-->




    <section class="py-5">
        <div class="container-fluid">

            <div class="bg-secondary py-5 my-5 rounded-5" style="background: url('images/bg-leaves-img-pattern.png') no-repeat;">
                <div class="container my-5">
                    <div class="row">
                        <div class="col-md-6 p-5">
                            <div class="section-header">
                                <h2 class="section-title display-4">Get <span class="text-primary">25% Discount</span> on your first purchase</h2>
                            </div>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Dictumst amet, metus, sit massa posuere maecenas. At tellus ut nunc amet vel egestas.</p>
                        </div>
                        <div class="col-md-6 p-5">
                            <form>
                                <div class="mb-3">
                                    <label for="name" class="form-label">Name</label>
                                    <input type="text"
                                           class="form-control form-control-lg" name="name" id="name" placeholder="Name">
                                </div>
                                <div class="mb-3">
                                    <label for="" class="form-label">Email</label>
                                    <input type="email" class="form-control form-control-lg" name="email" id="email" placeholder="abc@mail.com">
                                </div>
                                <div class="form-check form-check-inline mb-3">
                                    <label class="form-check-label" for="subscribe">
                                        <input class="form-check-input" type="checkbox" id="subscribe" value="subscribe">
                                        Subscribe to the newsletter
                                    </label>
                                </div>
                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-dark btn-lg">Submit</button>
                                </div>
                            </form>

                        </div>

                    </div>

                </div>
            </div>

        </div>
    </section>
    }

<!--Most popular products-->

 
 @* Our Recent Blog *@



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js"></script>

 <script>
    // Initialize Isotope
    var $galleryContainer = $('.gallery').isotope({
        itemSelector: '.product-item',
        layoutMode: 'fitRows'
    });

    // Dropdown filter change event
    $('#categoryFilter').on('change', function () {
        var value = $(this).val();
        $galleryContainer.isotope({ filter: value });
    });

    // Quantity Increment and Decrement
    $(document).ready(function () {
        $('.btn-number').click(function (e) {
            e.preventDefault();
            var fieldName = $(this).attr('data-type');
            var quantityInput = $(this).closest('.product-qty').find('input[name="quantity"]');
            var currentVal = parseInt(quantityInput.val());

            if (!isNaN(currentVal)) {
                if (fieldName === 'minus' && currentVal > 1) {
                    quantityInput.val(currentVal - 1);
                } else if (fieldName === 'plus') {
                    quantityInput.val(currentVal + 1);
                }
            } else {
                quantityInput.val(1);
            }
        });
    });
</script>
